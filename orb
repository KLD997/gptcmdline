#!/usr/bin/zsh

# Prompt for the OpenAI API key securely
echo "Please enter your OpenAI API key (it will not be displayed as you type):"
read -rs API_KEY

# Hardcoded model ID for "babbage" as the chat model
model_id="babbage-002"

# Main loop
while true; do
    echo "Enter your prompt (type 'exit' to quit):"
    read prompt

    if [ "$prompt" = "exit" ]; then
        break
    fi

    response=$(curl -s -X POST "https://api.openai.com/v1/engines/$model_id/completions" -H "Authorization: Bearer $API_KEY" -H "Content-Type: application/json" -d '{
      "prompt": "'"$prompt"'",
      "max_tokens": 150000
    }')

    echo "Response from ChatGPT $model_id:"
    echo "$response"
done
